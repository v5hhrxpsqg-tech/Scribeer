<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Inloggen bij Scribeer...</title>
</head>
<body style="font-family: sans-serif; text-align: center; padding-top: 50px;">
    <h2>Sessie herstellen...</h2>
    <p>Je wordt nu teruggestuurd naar Scribeer.nl</p>

    <script>
        // Pak zowel de '?' (query) als de '#' (hash) parameters
        const urlParams = new URLSearchParams(window.location.search);
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        
        const code = urlParams.get('code');
        const token = hashParams.get('access_token');
        
        let target = "https://scribeer.nl";
        
        if (token) {
            // Als we direct een token hebben (Implicit Flow)
            target += "?access_token=" + token;
            const refresh = hashParams.get('refresh_token');
            if (refresh) target += "&refresh_token=" + refresh;
        } else if (code) {
            // Als we een code hebben (PKCE Flow, wat jij nu hebt)
            target += "?code=" + code;
        }
        
        // Stuur de gebruiker terug met de buit!
        window.location.href = target;
    </script>
</body>
</html>